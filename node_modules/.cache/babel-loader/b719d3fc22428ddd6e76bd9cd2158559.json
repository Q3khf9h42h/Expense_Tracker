{"ast":null,"code":"var _s = $RefreshSig$();\nimport react, { useReducer, useEffect, useState } from \"react\";\nimport { projectFirestore, timeStamp } from \"../firebase/config\";\nlet intialState = {\n  document: null,\n  isPending: null,\n  isError: null,\n  success: null\n};\nconst firestoreReducer = (state, action) => {\n  switch (action.type) {\n    case \"IS_PENDING\":\n      return {\n        isPending: true,\n        isError: null,\n        document: null,\n        success: null\n      };\n    case \"DOC_ADDED\":\n      return {\n        isPending: false,\n        isError: null,\n        document: action.payload,\n        success: true\n      };\n    case \"DLETED_DOC\":\n      return {\n        isPending: false,\n        isError: null,\n        document: action.payload,\n        success: true\n      };\n    case \"ERROR\":\n      return {\n        isPending: false,\n        error: action.payload,\n        document: null,\n        success: null\n      };\n    default:\n      return state;\n  }\n};\nconst useFirestore = collection => {\n  _s();\n  const [response, dispatch] = useReducer(firestoreReducer, intialState);\n  const [isCancelled, setIsCancelled] = useState(false);\n  const ref = projectFirestore.collection(collection);\n  const dispatchIfNotCancelled = action => {\n    if (!isCancelled) {\n      dispatch(action);\n    }\n  };\n  const addDocument = async doc => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const createdAt = timeStamp.fromDate(new Date());\n      const addedDoc = await ref.add(doc);\n      dispatchIfNotCancelled({\n        type: \"ADDED_DOC\",\n        payload: addedDoc\n      });\n    } catch (err) {\n      dispatchIfNotCancelled({\n        type: \"ERROR\",\n        payload: err.message\n      });\n    }\n  };\n  const remDocument = async id => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const deletedDoc = await ref.doc(id).delete();\n      dispatchIfNotCancelled({\n        type: \"DLETED_DOC\",\n        payload: deletedDoc\n      });\n    } catch (err) {\n      dispatchIfNotCancelled({\n        type: \"ERROR\",\n        payload: err.message\n      });\n    }\n  };\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n  return {\n    addDocument,\n    remDocument,\n    response\n  };\n};\n_s(useFirestore, \"uTl3tW4BIMxo0YRJscHHwAZeqCE=\");\nexport default useFirestore;","map":{"version":3,"names":["react","useReducer","useEffect","useState","projectFirestore","timeStamp","intialState","document","isPending","isError","success","firestoreReducer","state","action","type","payload","error","useFirestore","collection","_s","response","dispatch","isCancelled","setIsCancelled","ref","dispatchIfNotCancelled","addDocument","doc","createdAt","fromDate","Date","addedDoc","add","err","message","remDocument","id","deletedDoc","delete"],"sources":["C:/Users/harsh/Downloads/Expense-Tracker-with-Authentication-main/Expense-Tracker-with-Authentication-main/src/hooks/useFirestore.js"],"sourcesContent":["import react,{ useReducer,useEffect,useState } from \"react\";\r\nimport { projectFirestore,timeStamp } from \"../firebase/config\";\r\n\r\nlet intialState = {\r\n    document:null,\r\n    isPending:null,\r\n    isError:null,\r\n    success:null\r\n}\r\nconst firestoreReducer = (state,action) =>{\r\n    switch (action.type){\r\n        case \"IS_PENDING\":\r\n            return {isPending:true,isError:null,document:null,success:null}\r\n        case \"DOC_ADDED\":\r\n            return {isPending:false,isError:null,document:action.payload,success:true}\r\n        case \"DLETED_DOC\":\r\n            return {isPending:false,isError:null,document:action.payload,success:true}\r\n        case \"ERROR\":\r\n            return {isPending:false,error:action.payload,document:null,success:null}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst useFirestore =(collection) => {\r\n    const [response, dispatch] = useReducer(firestoreReducer,intialState);\r\n    const [isCancelled,setIsCancelled] = useState(false);\r\n\r\n    const ref = projectFirestore.collection(collection)\r\n\r\n    const dispatchIfNotCancelled = (action) =>{\r\n        if(!isCancelled){\r\n            dispatch(action)\r\n        }\r\n    }\r\n\r\n    const addDocument = async (doc) =>{\r\n        dispatch({type:'IS_PENDING'})\r\n        try{\r\n            const createdAt = timeStamp.fromDate(new Date())\r\n            const addedDoc = await ref.add(doc)\r\n            dispatchIfNotCancelled({type:\"ADDED_DOC\",payload:addedDoc})\r\n\r\n        }catch(err){\r\n            dispatchIfNotCancelled({type:\"ERROR\",payload:err.message})\r\n        }\r\n    }\r\n\r\n    const remDocument = async (id) =>{\r\n        dispatch({type:'IS_PENDING'})\r\n        try{    \r\n            const deletedDoc = await ref.doc(id).delete()\r\n            dispatchIfNotCancelled({type:\"DLETED_DOC\",payload:deletedDoc})\r\n        }catch(err){\r\n            dispatchIfNotCancelled({type:\"ERROR\",payload:err.message})\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        return ()=>setIsCancelled(true)\r\n    },[])\r\n\r\n    return {addDocument,remDocument,response}\r\n}\r\n\r\nexport default useFirestore"],"mappings":"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"},"metadata":{},"sourceType":"module"}